<!DOCTYPE html>
<html>
    <head>
        <!-- meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />

        <!-- PyScript CSS-->
        <link rel="stylesheeet" href="https://pyscript.net/releases/2024.4.1/core.css">
        
        <!-- activate PyScript -->
        <script type="module" src="https://pyscript.net/releases/2024.4.1/core.js"></script>


        <!-- <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
        <script defer src="https://pyscript.net/alpha/pyscript.js"></script> -->
        
        <!-- website title -->
        <title>Glenlea ETC</title>


        <!-- CSS config -->
        <link rel="stylesheet" href="styles.css">

    
    </head>

    <body>

        <!-- code goes here -->
        <h1>Glenlea Exposure Time Calculator</h1>
       

        <!-- <py-script>

            #await micropip.install("matplotlib")
            import matplotlib.pyplot as plt
            import scipy.constants
            plt.style.use('seaborn-poster')
            import matplotlib.patches as patches
            import scipy
            import numpy as np
            import math


            pixel_size = 9 * 10**(-6) # add comments later
            Q_efficiency = 0.5*0.95
            read_noise = 13
            gain = 0.92
            sensor_offset = 50
            dark_noise = 0.03
            full_well = 60000
            sensor_X = 400
            sensor_Y = 267
            
            sensor_width = sensor_X * pixel_size
            sensor_height = sensor_Y * pixel_size
            
            
            
            # observatory parameters, same thing
            scope_dia = 0.3556
            mirror_area = np.pi * (scope_dia/2) ** 2
            scope_focal = 2.563
            f_ratio = scope_focal/scope_dia
            plate_scale = 0.75
            
            
            # filters, same thing
            filter_low = 500 * 1 * 10**(-9)
            filter_low_freq = scipy.constants.c/filter_low
            
            filter_high = 650 * 1 * 10**(-9)
            filter_high_freq = scipy.constants.c/filter_high
            
            filter_zero = 3781
            filter_freq_band = filter_low_freq - filter_high_freq
            
            
            # target, most likely custom, add bounds checking
            
            star_dist = 1487.4
            star_dist_m = star_dist * 9.461 * 10**15
            star_temp = 5500
            star_dia_solar = 1
            star_dia = 1.392 * 10**9*star_dia_solar
            
            
            # compute FOV
            
            # FOV_width = 206265 * sensor_width * (1/scope_focal)
            # FOV_height = 206265 * sensor_height * (1/scope_focal)
            FOV_width = 206265 * sensor_width * (1/scope_focal)
            FOV_height = 206265 * sensor_height * (1/scope_focal)
            FOV_area = FOV_width * FOV_height
            
            
            # sky parameters, again custom/dropdown
            
            sky_bright = 20.87
            seeing_cond = 5
            seeing_pixel = seeing_cond/plate_scale
            
      
            
            
            
            kB = scipy.constants.Boltzmann
            h = scipy.constants.Planck
            c = scipy.constants.c
            T = star_temp   # pass in function
        
            wl = np.linspace(1 * 10**(-8), 5 * 10**(-6), 10000)
            wlnm = wl * 10**9 
        
            P = ((2*np.pi*h*c**2)/(wl**5))*(1/np.exp((h*c)/(wl*kB*T)-1))
        
        
            plt.figure(figsize=(8, 6))
            plt.plot(wlnm, P, label='Stellar Black Body', color='y')
            plt.fill_between(wlnm, P, color='yellow', alpha=0.3, label='Stellar emission')
        
            plt.axvline(x=filter_low*10**9, color='r', linestyle='--', label='filter cut on')
            plt.axvline(x=filter_high*10**9, color='b', linestyle='--', label='filter cut off')
        
            plt.fill_betweenx(y=np.linspace(min(P), max(P) + 1*10**14), x1=filter_low*10**9, x2=filter_high*10**9, color='lightblue', alpha=0.4, label='Filter band pass')
        
            plt.title('Filtered Stellar Black Body Spectrum')
            plt.xlabel('Wavelengh (nm)')
            plt.ylabel('Power Density (W/m^3)')
            plt.xlim(0,2000)
            plt.ylim(0)
        
            plt.legend()
            plt.grid(True)
            plt.show()
            



        </py-script> -->




           
        <!-- <div id="output"> -->

            <!-- <py-script>

                from pyscript import document

                element = document.createElement('h1')
                element.innerText = "Hello"
                document.getElementById("output").append(element)
    
            </py-script> -->

            <!-- <button py-click="test">Run Test</button> -->
            <!-- <script type="py" src="./test.py" config="./pyscript.json"></script> -->


        <!-- </div> -->



        <div>Type something</div>
        <input type="text" id="test-input"/>
        <button id="submit-button" type="submit" py-click="my_function">OK</button>
        <div id="test-output"></div>
        <py-script>


            
            from pyscript import document

            def my_function(event): 

                inputTest = document.getElementById('test-input')
                print(inputTest.value)

                element = document.createElement('h1')
                element.innerText = inputTest.value
                document.getElementById("test-output").append(element)

        </py-script>

           


        

        






        <!-- <div>Type an sample input here</div>
        <input type="text" id="test-input"/>
        <button id="submit-button" type="submit" pys-onClick="my_function">OK</button>
        <div id="test-output"></div>




        <button py-click="my_function">Run Test</button>
        <script type="py" src="./test.py" config="./pyscript.json"></script> -->

        










        

        <!-- <div class="camera_select"> -->


            <!-- <form onsubmit="return false">
                <label for="name">Select Imaging Camera:</label><br>
                
        
                <select name="Camera" id="camera">
                    <option value="ASI6200MM">ASI6200MM</option>
                    <option value="ASI2600MM">ASI2600MM</option>
                    <option value="ASI533MM">ASI533MM</option>
                </select>
        
                <input pys-onClick="sub" type="submit" id="btn-form" val="submit">

                

            </form>  -->



            <!-- <form action="/action_page.php">

                <label for="px_size">Pixel Size</label>
                <input type="text" id="px_size" name="px_size"><br><br>
                
                <label for="q_eff">Quantum Efficiency</label>
                <input type="text" id="q_eff" name="q_eff"><br><br>


                <input type="submit" value="Submit">

            </form> -->
            
            
            





             <!-- <p>Output:</p>
            <p id = 'output'></p>
            <py-script>

                print("hello") -->
        
                <!-- def sub(*args,**kwargs):
                    result_place = Element('output')
                    result_place.write(f"{Element('name').value} is a good human from {Element('countries').value}") -->
            
            <!-- </py-script> -->



        <!-- </div> -->

        
    
        <!-- display graph -->

        <!-- <div class="graph">
            <p>Please wait for the button...</p>

            
            <button py-click="plot_light_curve_SB">Run Script</button>
            <script type="py" src="./ETC.py" config="./pyscript.json"></script>
        </div> -->

    </body>
</html>